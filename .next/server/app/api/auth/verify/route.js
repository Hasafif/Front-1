"use strict";(()=>{var e={};e.id=571,e.ids=[571],e.modules={30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},91494:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>m,originalPathname:()=>c,patchFetch:()=>v,requestAsyncStorage:()=>d,routeModule:()=>p,serverHooks:()=>f,staticGenerationAsyncStorage:()=>l,staticGenerationBailout:()=>h});var i={};r.r(i),r.d(i,{GET:()=>u,POST:()=>u});var a=r(95419),s=r(69108),n=r(99678),o=r(94823);async function u(e){try{let{token:t,email:r}=await e.json(),i=await o.db.user.findUnique({where:{email:r},select:{token:!0,expirationTime:!0,isVerified:!0}});if(i?.isVerified)return Response.json({token:t},{status:200});let a=new Date;if(i?.token!==t)return Response.json({message:"Somthing went wrong, user not verified"},{status:226});if(i&&i.expirationTime){if(a>i.expirationTime)return Response.json({error:"Token Expired"},{status:226});return await o.db.user.update({where:{email:r},data:{emailVerified:a,isVerified:!0}}),Response.json({token:t},{status:200})}}catch(e){return Response.json({error:e.message},{status:500})}}let p=new a.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/auth/verify/route",pathname:"/api/auth/verify",filename:"route",bundlePath:"app/api/auth/verify/route"},resolvedPagePath:"/home/ec2-user/g6Base1/next-front/app/api/auth/verify/route.ts",nextConfigOutput:"",userland:i}),{requestAsyncStorage:d,staticGenerationAsyncStorage:l,serverHooks:f,headerHooks:m,staticGenerationBailout:h}=p,c="/api/auth/verify/route";function v(){return(0,n.patchFetch)({serverHooks:f,staticGenerationAsyncStorage:l})}},94823:(e,t,r)=>{r.d(t,{db:()=>a});let i=require("@prisma/client"),a=globalThis.prisma??new i.PrismaClient},95419:(e,t,r)=>{e.exports=r(30517)}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[456],()=>r(91494));module.exports=i})();