"use strict";(()=>{var e={};e.id=654,e.ids=[654],e.modules={20399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},30517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},50852:e=>{e.exports=require("async_hooks")},6113:e=>{e.exports=require("crypto")},12781:e=>{e.exports=require("stream")},73837:e=>{e.exports=require("util")},84365:(e,t,r)=>{r.r(t),r.d(t,{headerHooks:()=>f,originalPathname:()=>j,patchFetch:()=>x,requestAsyncStorage:()=>d,routeModule:()=>h,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m,staticGenerationBailout:()=>w});var s={};r.r(s),r.d(s,{GET:()=>c,POST:()=>c});var a=r(95419),n=r(69108),i=r(99678),o=r(6521),u=r.n(o),p=r(94823),l=r(35269);async function c(e){let{usr:t,email:r,pwd:s}=await e.json(),a=await p.db.user.findUnique({where:{email:r}});if(await p.db.user.findUnique({where:{name:t}}))return Response.json({user:null,error:{username:"User with this username already exists"}},{status:226});if(a)return Response.json({user:null,error:{email:"User with this email already exists"}},{status:226});let n=await (0,o.hash)(s.toString(),10),i=await u().hash(t.toString(),10),c=new Date;c.setMinutes(c.getMinutes()+10);let h=await p.db.user.create({data:{name:t,email:r,isVerified:!1,password:n,token:i,expirationTime:c,image:"https://t4.ftcdn.net/jpg/02/15/84/43/360_F_215844325_ttX9YiIIyeaR7Ne6EaLLjMAmy4GvPC69.jpg"}}),d=new URL("https://chatg6.ai/authentication/verification");d.searchParams.append("token",i),d.searchParams.append("email",r);let m=await (0,l.R)(r,d,t,10);return h&&m?Response.json({user:h,message:"User created successfully"},{status:201}):Response.json({error:"Something went wrong, try again later"},{status:226})}let h=new a.AppRouteRouteModule({definition:{kind:n.x.APP_ROUTE,page:"/api/auth/signup/route",pathname:"/api/auth/signup",filename:"route",bundlePath:"app/api/auth/signup/route"},resolvedPagePath:"/home/ec2-user/g6Base1/next-front/app/api/auth/signup/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:d,staticGenerationAsyncStorage:m,serverHooks:g,headerHooks:f,staticGenerationBailout:w}=h,j="/api/auth/signup/route";function x(){return(0,i.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},94823:(e,t,r)=>{r.d(t,{db:()=>a});let s=require("@prisma/client"),a=globalThis.prisma??new s.PrismaClient},35269:(e,t,r)=>{r.d(t,{R:()=>a,Y:()=>n});let s=new(r(80908)).R("re_2PdPD2Z7_P22aWom7f9YiPwEtJLFZBfuU");async function a(e,t,r,a){try{let n=await s.emails.send({from:"G6 Account <G6Account@chatg6.ai>",to:[`${e}`],subject:"Email verification",html:`<p>Dear user: ${r} <br/> Please verify your <strong>G6 Account </strong> email <a href='${t.toString()}'>Here</a></p><br/>Note that this token will expire within ${a} minutes.`});if(n)return Response.json({data:n.data},{status:200});return Response.json({error:"The email is not sent"},{status:226})}catch(e){return Response.json({error:e})}}async function n(e,t,r,a){try{let n=await s.emails.send({from:"G6 Account <G6Account@chatg6.ai>",to:[`${e}`],subject:`${t}`,html:`<p>Dear user:<b> ${a}</b> ,<br/> <pre style='font-family:sans-serif;font-size:14px;'>${r}</pre>`});if(n)return Response.json({data:n.data},{status:200});return Response.json({error:"The email is not sent"},{status:226})}catch(e){return Response.json({error:e})}}}};var t=require("../../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[456,731,521],()=>r(84365));module.exports=s})();